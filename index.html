

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>trackhub &mdash; trackhub 0.2.4 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/graphviz.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Quickstart" href="quickstart.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="#" class="icon icon-home"> trackhub
          

          
          </a>

          
            
            
              <div class="version">
                0.2.4
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">Quickstart</a></li>
<li class="toctree-l1"><a class="reference internal" href="validation.html">Validation</a></li>
<li class="toctree-l1"><a class="reference internal" href="grouping.html">Organizing larger track hubs</a></li>
<li class="toctree-l1"><a class="reference internal" href="html_doc.html">Documenting tracks in hubs</a></li>
<li class="toctree-l1"><a class="reference internal" href="assembly_example.html">Assembly example</a></li>
<li class="toctree-l1"><a class="reference internal" href="autodocs.html">API documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="changelog.html">Changelog</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="#">trackhub</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="#" class="icon icon-home"></a> &raquo;</li>
        
      <li>trackhub</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/index.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="trackhub">
<h1>trackhub<a class="headerlink" href="#trackhub" title="Permalink to this headline">¶</a></h1>
<a class="reference external image-reference" href="https://github.com/daler/trackhub/actions?query=workflow%3Amain"><img alt="https://github.com/daler/trackhub/workflows/main/badge.svg" src="https://github.com/daler/trackhub/workflows/main/badge.svg" /></a>
<p>See the documentation at <a class="reference external" href="https://daler.github.io/trackhub">https://daler.github.io/trackhub</a> for more details.</p>
<p>Data visualization is critical at all steps of genomic data analysis, from QC
through final figure preparation.  A <a class="reference external" href="https://genome.ucsc.edu/goldenPath/help/hgTrackHubHelp.html">track hub</a> is way of
organizing large numbers of of genomic data “tracks” (data files in a supported
format), configured with a set of plain-text files that determine the
organization, UI, labels, color, and other details. The files comprising
a track hub are uploaded to a server, and a genome browser (e.g., UCSC Genome
Browser) is pointed to the served URL for viewing. For example, <a class="reference external" href="http://genome.ucsc.edu/cgi-bin/hgTracks?db=hg19&amp;hubUrl=http://vizhub.wustl.edu/VizHub/RoadmapRelease3.txt">here</a>
is a track hub created by the ENCODE project. It is straightforward to write
the configuration files and upload the tracks manually if you have a small
number of tracks. For larger data sets however, this becomes tedious and
error-prone.</p>
<p><cite>trackhub</cite> is a Python package that enables the programmatic construction and
upload of arbitrarily complex track hubs. It has no dependencies besides Python
itself, the common Python package <cite>docutils</cite>, and the availability of <code class="docutils literal notranslate"><span class="pre">rsync</span></code>
(a standard Unix command-line tool for remotely transferring files). It is
availabe on PyPI, bioconda, and GitHub; an automated test suite and tested
documentation ensure high-quality code and help.</p>
<div class="section" id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h2>
<p>Using pip: <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">trackhub</span></code></p>
<p>Using <a class="reference external" href="https://bioconda.github.io">bioconda</a>: <code class="docutils literal notranslate"><span class="pre">conda</span> <span class="pre">install</span> <span class="pre">trackhub</span></code></p>
</div>
<div class="section" id="features">
<h2>Features<a class="headerlink" href="#features" title="Permalink to this headline">¶</a></h2>
<div class="section" id="validation">
<h3>Validation<a class="headerlink" href="#validation" title="Permalink to this headline">¶</a></h3>
<p><cite>trackhub</cite> validates parameters against UCSC’s documented options, so errors
are caught early and less time is spent debugging in the Genome Browser.</p>
</div>
<div class="section" id="filename-handling">
<h3>Filename handling<a class="headerlink" href="#filename-handling" title="Permalink to this headline">¶</a></h3>
<p>The directory structure of an analysis rarely matches the organization you want
for a track hub.  <cite>trackhub</cite> symlinks track files to a staging area so the hub
can be inspected locally before being uploaded, e.g., with <code class="docutils literal notranslate"><span class="pre">rsync</span></code>. Staging
also enables rapid deployment and updating since only files that have changed
will be uploaded on subsequent calls.</p>
</div>
<div class="section" id="flexibility">
<h3>Flexibility<a class="headerlink" href="#flexibility" title="Permalink to this headline">¶</a></h3>
<p>Sensible defaults make it easy to build a functioning track hub. However, these
defaults can always be overridden for complex configurations or when more
precise control is needed. For example, by default a track’s <cite>name</cite> also
becomes the <cite>shortLabel</cite>, <cite>longLabel</cite> and <cite>filename</cite> of the track in the hub
unless any of these are overridden by the user.</p>
</div>
<div class="section" id="easy-track-documentation">
<h3>Easy track documentation<a class="headerlink" href="#easy-track-documentation" title="Permalink to this headline">¶</a></h3>
<p>Write track hub documentation in ReStructured Text, and it is converted to
HTML, connected to the track and uploaded with the rest of the hub. This allows
for programmatically including content without the tedium of writing HTML by
hand.</p>
</div>
<div class="section" id="extensible">
<h3>Extensible<a class="headerlink" href="#extensible" title="Permalink to this headline">¶</a></h3>
<p>The framework provided by <cite>trackhub</cite> can be extended as new hub functionality is
added to the UCSC Genome Browser.</p>
<p>Full documentation can be found at <a class="reference external" href="https://daler.github.io/trackhub">https://daler.github.io/trackhub</a>. The code
in the documentation is run as part of the test suite to guarantee correctness.</p>
</div>
</div>
<div class="section" id="basic-example">
<span id="id1"></span><h2>Basic example<a class="headerlink" href="#basic-example" title="Permalink to this headline">¶</a></h2>
<p>The following code demonstrates a track hub built out of all bigWig files found
in a directory. It is relatively simple; see these other examples from the
documentation for complex usage.</p>
<p>This basic example is run automatically when the documentation is re-generated.
You can view the uploaded files in the <a class="reference external" href="https://github.com/daler/trackhub-demo">trackhub-demo</a> GitHub repository, and <a class="reference external" href="http://genome.ucsc.edu/cgi-bin/hgTracks?db=hg38&amp;hubUrl=https://raw.githubusercontent.com/daler/trackhub-demo/master/example_hub/myhub.hub.txt&amp;position=chr1%3A1-5000">load the hub</a>
directly into UCSC to see what it looks like.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">glob</span><span class="o">,</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">trackhub</span>

<span class="c1"># First we initialize the components of a track hub</span>

<span class="n">hub</span><span class="p">,</span> <span class="n">genomes_file</span><span class="p">,</span> <span class="n">genome</span><span class="p">,</span> <span class="n">trackdb</span> <span class="o">=</span> <span class="n">trackhub</span><span class="o">.</span><span class="n">default_hub</span><span class="p">(</span>
    <span class="n">hub_name</span><span class="o">=</span><span class="s2">&quot;myhub&quot;</span><span class="p">,</span>
    <span class="n">short_label</span><span class="o">=</span><span class="s1">&#39;myhub&#39;</span><span class="p">,</span>
    <span class="n">long_label</span><span class="o">=</span><span class="s1">&#39;myhub&#39;</span><span class="p">,</span>
    <span class="n">genome</span><span class="o">=</span><span class="s2">&quot;hg38&quot;</span><span class="p">,</span>
    <span class="n">email</span><span class="o">=</span><span class="s2">&quot;ryan.dale@nih.gov&quot;</span><span class="p">)</span>

<span class="c1"># Next we add tracks for some bigWigs. These can be anywhere on the</span>
<span class="c1"># filesystem; symlinks will be made to them. Here we use some example data</span>
<span class="c1"># included with the trackhub package; in practice you&#39;d point to your own</span>
<span class="c1"># data.</span>

<span class="k">for</span> <span class="n">bigwig</span> <span class="ow">in</span> <span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s1">&#39;trackhub/test/data/sine-hg38-*.bw&#39;</span><span class="p">):</span>

    <span class="c1"># track names can&#39;t have any spaces or special characters. Since we&#39;ll</span>
    <span class="c1"># be using filenames as names, and filenames have non-alphanumeric</span>
    <span class="c1"># characters, we use the sanitize() function to remove them.</span>

    <span class="n">name</span> <span class="o">=</span> <span class="n">trackhub</span><span class="o">.</span><span class="n">helpers</span><span class="o">.</span><span class="n">sanitize</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">bigwig</span><span class="p">))</span>

    <span class="c1"># We&#39;re keeping this relatively simple, but arguments can be</span>
    <span class="c1"># programmatically determined (color tracks based on sample; change scale</span>
    <span class="c1"># based on criteria, etc).</span>

    <span class="n">track</span> <span class="o">=</span> <span class="n">trackhub</span><span class="o">.</span><span class="n">Track</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>          <span class="c1"># track names can&#39;t have any spaces or special chars.</span>
        <span class="n">source</span><span class="o">=</span><span class="n">bigwig</span><span class="p">,</span>      <span class="c1"># filename to build this track from</span>
        <span class="n">visibility</span><span class="o">=</span><span class="s1">&#39;full&#39;</span><span class="p">,</span>  <span class="c1"># shows the full signal</span>
        <span class="n">color</span><span class="o">=</span><span class="s1">&#39;128,0,5&#39;</span><span class="p">,</span>    <span class="c1"># brick red</span>
        <span class="n">autoScale</span><span class="o">=</span><span class="s1">&#39;on&#39;</span><span class="p">,</span>     <span class="c1"># allow the track to autoscale</span>
        <span class="n">tracktype</span><span class="o">=</span><span class="s1">&#39;bigWig&#39;</span><span class="p">,</span> <span class="c1"># required when making a track</span>
    <span class="p">)</span>

    <span class="c1"># Each track is added to the trackdb</span>

    <span class="n">trackdb</span><span class="o">.</span><span class="n">add_tracks</span><span class="p">(</span><span class="n">track</span><span class="p">)</span>

<span class="c1"># In this example we &quot;upload&quot; the hub locally. Files are created in the</span>
<span class="c1"># &quot;example_hub&quot; directory, along with symlinks to the tracks&#39; data files.</span>
<span class="c1"># This directory can then be pushed to GitHub or rsynced to a server.</span>

<span class="n">trackhub</span><span class="o">.</span><span class="n">upload</span><span class="o">.</span><span class="n">upload_hub</span><span class="p">(</span><span class="n">hub</span><span class="o">=</span><span class="n">hub</span><span class="p">,</span> <span class="n">host</span><span class="o">=</span><span class="s1">&#39;localhost&#39;</span><span class="p">,</span> <span class="n">remote_dir</span><span class="o">=</span><span class="s1">&#39;example_hubs/example_hub&#39;</span><span class="p">)</span>

<span class="c1"># Alternatively, we could upload directly to a web server (not run in this</span>
<span class="c1"># example):</span>

<span class="k">if</span> <span class="mi">0</span><span class="p">:</span>
    <span class="n">trackhub</span><span class="o">.</span><span class="n">upload</span><span class="o">.</span><span class="n">upload_hub</span><span class="p">(</span>
        <span class="n">hub</span><span class="o">=</span><span class="n">hub</span><span class="p">,</span> <span class="n">host</span><span class="o">=</span><span class="s1">&#39;example.com&#39;</span><span class="p">,</span> <span class="n">user</span><span class="o">=</span><span class="s1">&#39;username&#39;</span><span class="p">,</span>
        <span class="n">remote_dir</span><span class="o">=</span><span class="s1">&#39;/var/www/example_hub&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Copyright 2012-2020 Ryan Dale; MIT license.</p>
<p>Contents:</p>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">Quickstart</a><ul>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#preliminaries">Preliminaries</a></li>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#create-hub-components">Create hub components</a></li>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#adding-tracks">Adding tracks</a></li>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#render-stage-the-hub">Render (stage) the hub</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="validation.html">Validation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="validation.html#updating-parameters">Updating parameters</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="grouping.html">Organizing larger track hubs</a></li>
<li class="toctree-l1"><a class="reference internal" href="html_doc.html">Documenting tracks in hubs</a></li>
<li class="toctree-l1"><a class="reference internal" href="assembly_example.html">Assembly example</a></li>
<li class="toctree-l1"><a class="reference internal" href="autodocs.html">API documentation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="autodocs/trackhub.base.HubComponent.html">trackhub.base.HubComponent</a></li>
<li class="toctree-l2"><a class="reference internal" href="autodocs/trackhub.Hub.html">trackhub.Hub</a></li>
<li class="toctree-l2"><a class="reference internal" href="autodocs/trackhub.GenomesFile.html">trackhub.GenomesFile</a></li>
<li class="toctree-l2"><a class="reference internal" href="autodocs/trackhub.Genome.html">trackhub.Genome</a></li>
<li class="toctree-l2"><a class="reference internal" href="autodocs/trackhub.TrackDb.html">trackhub.TrackDb</a></li>
<li class="toctree-l2"><a class="reference internal" href="autodocs/trackhub.BaseTrack.html">trackhub.BaseTrack</a></li>
<li class="toctree-l2"><a class="reference internal" href="autodocs/trackhub.Track.html">trackhub.Track</a></li>
<li class="toctree-l2"><a class="reference internal" href="autodocs/trackhub.CompositeTrack.html">trackhub.CompositeTrack</a></li>
<li class="toctree-l2"><a class="reference internal" href="autodocs/trackhub.ViewTrack.html">trackhub.ViewTrack</a></li>
<li class="toctree-l2"><a class="reference internal" href="autodocs/trackhub.SuperTrack.html">trackhub.SuperTrack</a></li>
<li class="toctree-l2"><a class="reference internal" href="autodocs/trackhub.AggregateTrack.html">trackhub.AggregateTrack</a></li>
<li class="toctree-l2"><a class="reference internal" href="autodocs/trackhub.SubGroupDefinition.html">trackhub.SubGroupDefinition</a></li>
<li class="toctree-l2"><a class="reference internal" href="autodocs/trackhub.GroupsFile.html">trackhub.GroupsFile</a></li>
<li class="toctree-l2"><a class="reference internal" href="autodocs/trackhub.GroupDefinition.html">trackhub.GroupDefinition</a></li>
<li class="toctree-l2"><a class="reference internal" href="autodocs/trackhub.Assembly.html">trackhub.Assembly</a></li>
<li class="toctree-l2"><a class="reference internal" href="autodocs/trackhub.upload.stage_hub.html">trackhub.upload.stage_hub</a></li>
<li class="toctree-l2"><a class="reference internal" href="autodocs/trackhub.upload.upload_hub.html">trackhub.upload.upload_hub</a></li>
<li class="toctree-l2"><a class="reference internal" href="autodocs/trackhub.helpers.dimensions_from_subgroups.html">trackhub.helpers.dimensions_from_subgroups</a></li>
<li class="toctree-l2"><a class="reference internal" href="autodocs/trackhub.helpers.filter_composite_from_subgroups.html">trackhub.helpers.filter_composite_from_subgroups</a></li>
<li class="toctree-l2"><a class="reference internal" href="autodocs/trackhub.helpers.hex2rgb.html">trackhub.helpers.hex2rgb</a></li>
<li class="toctree-l2"><a class="reference internal" href="autodocs/trackhub.helpers.sanitize.html">trackhub.helpers.sanitize</a></li>
<li class="toctree-l2"><a class="reference internal" href="autodocs/trackhub.helpers.data_dir.html">trackhub.helpers.data_dir</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="changelog.html">Changelog</a><ul>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#version-0-2-4-dec-2017">Version 0.2.4 (Dec 2017)</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#version-0-1-3-nov-2015">Version 0.1.3 (Nov 2015)</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#version-0-1-2-jan-2-2015">Version 0.1.2 (Jan 2 2015)</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#version-0-1-1-dec-19-2012">Version 0.1.1 (Dec 19 2012)</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#version-0-1-oct-30-2012">Version 0.1 (Oct 30 2012)</a></li>
</ul>
</li>
</ul>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="quickstart.html" class="btn btn-neutral float-right" title="Quickstart" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2012, Ryan Dale.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>