<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Track hub from Excel &mdash; trackhub 1.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=fa44fd50" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="_static/graphviz.css?v=fd3f3429" />

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="_static/jquery.js?v=5d32c60e"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="_static/documentation_options.js?v=f2a433a1"></script>
        <script src="_static/doctools.js?v=9a2dae69"></script>
        <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Validation" href="validation.html" />
    <link rel="prev" title="Quickstart" href="quickstart.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            trackhub
          </a>
              <div class="version">
                1.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">Quickstart</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Track hub from Excel</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#create-a-template">1. Create a template</a></li>
<li class="toctree-l2"><a class="reference internal" href="#fill-out-the-excel-workbook">2. Fill out the Excel workbook</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#hub-and-genome-sheets">hub and genome sheets</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#example-hub-sheet">Example <code class="docutils literal notranslate"><span class="pre">hub</span></code> sheet</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#container-track-sheets">Container track sheets</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#example-view-config-sheet">Example <code class="docutils literal notranslate"><span class="pre">view_config</span></code> sheet</a></li>
<li class="toctree-l4"><a class="reference internal" href="#example-composite-config-sheet">Example <code class="docutils literal notranslate"><span class="pre">composite_config</span></code> sheet</a></li>
<li class="toctree-l4"><a class="reference internal" href="#example-super-config-sheet">Example <code class="docutils literal notranslate"><span class="pre">super_config</span></code> sheet</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#tracks">Tracks</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#example-tracks-sheet">Example <code class="docutils literal notranslate"><span class="pre">tracks</span></code> sheet</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#run-the-script">3. Run the script</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="validation.html">Validation</a></li>
<li class="toctree-l1"><a class="reference internal" href="grouping.html">Organizing larger track hubs</a></li>
<li class="toctree-l1"><a class="reference internal" href="html_doc.html">Documenting tracks in hubs</a></li>
<li class="toctree-l1"><a class="reference internal" href="assembly_example.html">Assembly example</a></li>
<li class="toctree-l1"><a class="reference internal" href="groupAutoScale.html">groupAutoScale example</a></li>
<li class="toctree-l1"><a class="reference internal" href="tracktypes.html">Examples of hubs using various supported track types</a></li>
<li class="toctree-l1"><a class="reference internal" href="tests.html">Testing infrastructure</a></li>
<li class="toctree-l1"><a class="reference internal" href="autodocs.html">API documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="changelog.html">Changelog</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">trackhub</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Track hub from Excel</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/excelinstructions.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="track-hub-from-excel">
<span id="excelinstructions"></span><h1>Track hub from Excel<a class="headerlink" href="#track-hub-from-excel" title="Link to this heading"></a></h1>
<p>If you are an avid user of the UCSC Genome Browser and the <em>trackhub</em> package,
you might find it tedious to write a script for every single hub you create.
The command-line tool uses this package to further automate the trak hub making
process. Additionally, if you are not familiar with Python, this tool makes it
even easier to make track hubs. Follow this guide for how to use the package
and how to fill out an Excel workbook to make any simple or complex
visualization on the UCSC Genome Browser.</p>
<section id="create-a-template">
<h2>1. Create a template<a class="headerlink" href="#create-a-template" title="Link to this heading"></a></h2>
<p>The Excel file must have a specific format to be parsed correctly.</p>
<p>To create a template, run:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">trackhub_from_excel</span> <span class="o">--</span><span class="n">template</span>
</pre></div>
</div>
<p>This will create a file <code class="docutils literal notranslate"><span class="pre">template.xlsx</span></code> in the current directory, with the
correct sheets that you can fill out with the instructions below.</p>
<p>Alternatively, you can get a working example to study and test:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">trackhub_from_excel</span> <span class="o">--</span><span class="n">create</span><span class="o">-</span><span class="n">example</span> <span class="n">my_example</span><span class="o">.</span><span class="n">xlsx</span>
</pre></div>
</div>
</section>
<section id="fill-out-the-excel-workbook">
<h2>2. Fill out the Excel workbook<a class="headerlink" href="#fill-out-the-excel-workbook" title="Link to this heading"></a></h2>
<p>Using the template just created, fill out the sheets with the data you’d like
to visualize.</p>
<section id="hub-and-genome-sheets">
<h3>hub and genome sheets<a class="headerlink" href="#hub-and-genome-sheets" title="Link to this heading"></a></h3>
<p>The following special sheet names are used for configuring the hub and the
genome (for assembly tracks):</p>
<p><code class="docutils literal notranslate"><span class="pre">hub</span></code> – This sheet is necessary for all track hubs. It
defines the hub name and labels and genome.</p>
<p><code class="docutils literal notranslate"><span class="pre">genome</span></code> – This sheet is only necessary when using a genome assembly. It
points to the 2bit file and gives the genome a name and label.</p>
<section id="example-hub-sheet">
<h4>Example <code class="docutils literal notranslate"><span class="pre">hub</span></code> sheet<a class="headerlink" href="#example-hub-sheet" title="Link to this heading"></a></h4>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p>hub</p></td>
<td><p>examplehub</p></td>
</tr>
<tr class="row-even"><td><p>short_label</p></td>
<td><p>Example hub</p></td>
</tr>
<tr class="row-odd"><td><p>long_label</p></td>
<td><p>Example track hub from Excel</p></td>
</tr>
<tr class="row-even"><td><p>email</p></td>
<td><p><a class="reference external" href="mailto:user&#37;&#52;&#48;example&#46;com">user<span>&#64;</span>example<span>&#46;</span>com</a></p></td>
</tr>
<tr class="row-odd"><td><p>genome</p></td>
<td><p>hg38</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="container-track-sheets">
<h3>Container track sheets<a class="headerlink" href="#container-track-sheets" title="Link to this heading"></a></h3>
<p>Container tracks must be configured in their own sheet.</p>
<p>The following special sheet names are required when using the corresponding
container track. These sheets are created in the template:
<code class="docutils literal notranslate"><span class="pre">aggregate_config</span></code>, <code class="docutils literal notranslate"><span class="pre">view_config</span></code>, <code class="docutils literal notranslate"><span class="pre">super_config</span></code>, and
<code class="docutils literal notranslate"><span class="pre">composite_config</span></code>.</p>
<p>Each type of container track must be on its own sheet. For example the sheet
<code class="docutils literal notranslate"><span class="pre">view_config</span></code> can have several view tracks defined but there can be no other
types of container tracks defined on that sheet. This applies to all container
track types.</p>
<p>Columns in these sheets correspond to valid track parameters for the respective
track type. There are also some special fields for container track configuration:</p>
<p>Extra <code class="docutils literal notranslate"><span class="pre">aggregate_config</span></code> field: An aggregate track can be placed in a super
track. In this case, include add a super track in <code class="docutils literal notranslate"><span class="pre">super_config</span></code>, and in
<code class="docutils literal notranslate"><span class="pre">aggregate_config</span></code> add a <code class="docutils literal notranslate"><span class="pre">super</span></code> column and add the name of the super
track.</p>
<p>Extra <code class="docutils literal notranslate"><span class="pre">view_config</span></code> field: Views must be placed inside of a composite track. Configure
this by adding the name of the composite track in the column labeled
<code class="docutils literal notranslate"><span class="pre">composite</span></code>.</p>
<p>Extra <code class="docutils literal notranslate"><span class="pre">composite_config</span></code> field: A composite track can be placed in a super
track. In this case, include the name of the super track in the column labeled
<code class="docutils literal notranslate"><span class="pre">super</span></code> similar to as described above for <code class="docutils literal notranslate"><span class="pre">view_config</span></code>.</p>
<p>Super tracks are within the track hub and therefore do not need special fields.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Subgroups are not specified in the composite config. Rather, they are
automatically inferred and created based on the subgroups assigned to
individual tracks (and which composites those tracks are assigned to). This
makes it much more convenient to organize your tracks. See the tracks
section below for details.</p>
</div>
<section id="example-view-config-sheet">
<h4>Example <code class="docutils literal notranslate"><span class="pre">view_config</span></code> sheet<a class="headerlink" href="#example-view-config-sheet" title="Link to this heading"></a></h4>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>name</p></th>
<th class="head"><p>view</p></th>
<th class="head"><p>short_label</p></th>
<th class="head"><p>long_label</p></th>
<th class="head"><p>visibility</p></th>
<th class="head"><p>tracktype</p></th>
<th class="head"><p>composite</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>signal</p></td>
<td><p>signalview</p></td>
<td><p>Genomic signal</p></td>
<td><p>Genomic signal (CPM)</p></td>
<td><p>full</p></td>
<td><p>bigWig</p></td>
<td><p>experiment1</p></td>
</tr>
<tr class="row-odd"><td><p>peaks</p></td>
<td><p>peaksview</p></td>
<td><p>Peaks</p></td>
<td><p>Called peaks (macs2)</p></td>
<td><p>dense</p></td>
<td><p>bigBed</p></td>
<td><p>experiment1</p></td>
</tr>
</tbody>
</table>
</section>
<section id="example-composite-config-sheet">
<h4>Example <code class="docutils literal notranslate"><span class="pre">composite_config</span></code> sheet<a class="headerlink" href="#example-composite-config-sheet" title="Link to this heading"></a></h4>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>name</p></th>
<th class="head"><p>short_label</p></th>
<th class="head"><p>long_label</p></th>
<th class="head"><p>tracktype</p></th>
<th class="head"><p>super</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>experiment1</p></td>
<td><p>experiment 1</p></td>
<td><p>Experiment 1</p></td>
<td><p>bigWig</p></td>
<td><p>supertrack1</p></td>
</tr>
<tr class="row-odd"><td><p>experiment2</p></td>
<td><p>experiment 2</p></td>
<td><p>Experiment 2</p></td>
<td><p>bigWig</p></td>
<td></td>
</tr>
</tbody>
</table>
</section>
<section id="example-super-config-sheet">
<h4>Example <code class="docutils literal notranslate"><span class="pre">super_config</span></code> sheet<a class="headerlink" href="#example-super-config-sheet" title="Link to this heading"></a></h4>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>name</p></th>
<th class="head"><p>short_label</p></th>
<th class="head"><p>long_label</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>supertrack1</p></td>
<td><p>Super track</p></td>
<td><p>Super track</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="tracks">
<h3>Tracks<a class="headerlink" href="#tracks" title="Link to this heading"></a></h3>
<p>All other sheets that do not have the special names indicated above are assumed
to configure tracks.</p>
<p>Each row defines a track and must have values in the <code class="docutils literal notranslate"><span class="pre">name</span></code>, <code class="docutils literal notranslate"><span class="pre">tracktype</span></code>,
and <code class="docutils literal notranslate"><span class="pre">source</span></code> (or <code class="docutils literal notranslate"><span class="pre">bigDataUrl</span></code>) columns. Use <code class="docutils literal notranslate"><span class="pre">source</span></code> when the file is on
disk and use <code class="docutils literal notranslate"><span class="pre">bigDataUrl</span></code> when the file is publicly hosted. The user can
define more fields according to the specific track type.</p>
<p>Different track types can be listed on the same sheet. Tracks in different
containers can be listed on the same sheet and tracks in the same containers
can be listed on different sheets.</p>
<p>Leave the cell in the Excel sheet blank to omit that track field for that
track. The program will remove this field for the track.</p>
<p>To use container tracks, be sure to define the container and use the
<code class="docutils literal notranslate"><span class="pre">container</span></code> and <code class="docutils literal notranslate"><span class="pre">container_type</span></code> fields for the track.</p>
<p>For example, to place a track in a view track you need first add a row for the
view in the <code class="docutils literal notranslate"><span class="pre">view_config</span></code> sheet that includes a <code class="docutils literal notranslate"><span class="pre">name</span></code> field. In another
sheet (containing tracks, so you can name it whatever you want), fill out a row
for the track including the <code class="docutils literal notranslate"><span class="pre">container_type</span></code> and <code class="docutils literal notranslate"><span class="pre">container</span></code> fields in
addition to the required fields described above. For the <code class="docutils literal notranslate"><span class="pre">container_type</span></code>
column, fill in “view” and for the <code class="docutils literal notranslate"><span class="pre">container</span></code> column fill in the same name
that is in the <code class="docutils literal notranslate"><span class="pre">view_config</span></code> sheet.</p>
<p>To add a subgroup to a track, make a column with the prefix <code class="docutils literal notranslate"><span class="pre">subgroup_</span></code>. The
value after the underscore will become the name of the subgroup. Fill in the
group that data file fits into.</p>
<p>For example, to make subgroups based on genotype, you might label the column
<code class="docutils literal notranslate"><span class="pre">subgroup_genotype</span></code> and fill in the rows with “WT” or “KO”. You can make
as many subgroups as you need.</p>
<section id="example-tracks-sheet">
<h4>Example <code class="docutils literal notranslate"><span class="pre">tracks</span></code> sheet<a class="headerlink" href="#example-tracks-sheet" title="Link to this heading"></a></h4>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>name</p></th>
<th class="head"><p>short_label</p></th>
<th class="head"><p>long_label</p></th>
<th class="head"><p>tracktype</p></th>
<th class="head"><p>source</p></th>
<th class="head"><p>visibility</p></th>
<th class="head"><p>color</p></th>
<th class="head"><p>container</p></th>
<th class="head"><p>container_type</p></th>
<th class="head"><p>dimensions</p></th>
<th class="head"><p>subgroup_celltype</p></th>
<th class="head"><p>subgroup_genotype</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>k562_wt</p></td>
<td><p>K562 WT signal</p></td>
<td><p>K562 cells, WT signal</p></td>
<td><p>bigWig</p></td>
<td><p>data/kwt.bigwig</p></td>
<td><p>full</p></td>
<td><p>120,51,154</p></td>
<td><p>signalview</p></td>
<td><p>view</p></td>
<td><p>dimX=genotype dimY=celltype</p></td>
<td><p>k562</p></td>
<td><p>wt</p></td>
</tr>
<tr class="row-odd"><td><p>k562_wt_pk</p></td>
<td><p>K562 WT peaks</p></td>
<td><p>K562 cells, WT peaks</p></td>
<td><p>bigBed</p></td>
<td><p>data/kwt.bigbed</p></td>
<td><p>dense</p></td>
<td><p>120,51,154</p></td>
<td><p>peakview</p></td>
<td><p>view</p></td>
<td><p>dimX=genotype dimY=celltype</p></td>
<td><p>k562</p></td>
<td><p>wt</p></td>
</tr>
</tbody>
</table>
</section>
</section>
</section>
<section id="run-the-script">
<h2>3. Run the script<a class="headerlink" href="#run-the-script" title="Link to this heading"></a></h2>
<p>This will default to naming the track hub directory as “staging”</p>
<p><code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">trackhub_from_excel.py</span> <span class="pre">--excel_file</span> <span class="pre">experiment.xlsx</span></code></p>
<p>You can run it with the <code class="docutils literal notranslate"><span class="pre">--staging</span></code> flag to specify the name</p>
<p><code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">trackhub_from_excel.py</span> <span class="pre">--excel_file</span> <span class="pre">experiment.xlsx</span> <span class="pre">--staging</span> <span class="pre">experiment</span></code></p>
<p>The output directory will then be ready for uploading to a host.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="quickstart.html" class="btn btn-neutral float-left" title="Quickstart" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="validation.html" class="btn btn-neutral float-right" title="Validation" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2012, Ryan Dale.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>